{"ast":null,"code":"const nodemailer = require(\"nodemailer\");\n\nexport default function handler(req, res) {\n  res.status(200).json({\n    status: 200\n  });\n\n  async function main() {\n    let transporter = nodemailer.createTransport({\n      host: \"mail.gandi.net\",\n      port: \"465\",\n      secure: \"true\",\n      auth: {\n        user: process.env.EMAIL,\n        pass: process.env.EMAIL_PASS\n      }\n    });\n    let info = await transporter.sendMail({\n      from: '\"Graham Web Works\" <donotreply@grahamwebdesign.com>',\n      to: \"luke.evan.graham@gmail.com\",\n      subject: \"Message from grahamwebworks.com\",\n      text: `${req.body.name} (${req.body.email}) just sent this message via www.grahamwebworks.com:\n        \n        ${req.body.message}`\n    });\n    transporter.verify(function (error, success) {\n      error ? console.log(error) : console.log(\"Server is ready to take our messages\", success);\n    });\n  }\n\n  main().catch(console.error);\n}","map":{"version":3,"sources":["/Users/Luke/Documents/sites/graham-web/frontend/pages/api/contact.js"],"names":["nodemailer","require","handler","req","res","status","json","main","transporter","createTransport","host","port","secure","auth","user","process","env","EMAIL","pass","EMAIL_PASS","info","sendMail","from","to","subject","text","body","name","email","message","verify","error","success","console","log","catch"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AAEA,eAAe,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACxCA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAED,IAAAA,MAAM,EAAE;AAAV,GAArB;;AAEA,iBAAeE,IAAf,GAAsB;AACpB,QAAIC,WAAW,GAAGR,UAAU,CAACS,eAAX,CAA2B;AAC3CC,MAAAA,IAAI,EAAE,gBADqC;AAE3CC,MAAAA,IAAI,EAAE,KAFqC;AAG3CC,MAAAA,MAAM,EAAE,MAHmC;AAI3CC,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,KADd;AAEJC,QAAAA,IAAI,EAAEH,OAAO,CAACC,GAAR,CAAYG;AAFd;AAJqC,KAA3B,CAAlB;AAUA,QAAIC,IAAI,GAAG,MAAMZ,WAAW,CAACa,QAAZ,CAAqB;AACpCC,MAAAA,IAAI,EAAE,qDAD8B;AAEpCC,MAAAA,EAAE,EAAE,4BAFgC;AAGpCC,MAAAA,OAAO,EAAE,iCAH2B;AAIpCC,MAAAA,IAAI,EAAG,GAAEtB,GAAG,CAACuB,IAAJ,CAASC,IAAK,KAAIxB,GAAG,CAACuB,IAAJ,CAASE,KAAM;AAChD;AACA,UAAUzB,GAAG,CAACuB,IAAJ,CAASG,OAAQ;AANe,KAArB,CAAjB;AASArB,IAAAA,WAAW,CAACsB,MAAZ,CAAmB,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AAC3CD,MAAAA,KAAK,GACDE,OAAO,CAACC,GAAR,CAAYH,KAAZ,CADC,GAEDE,OAAO,CAACC,GAAR,CAAY,sCAAZ,EAAoDF,OAApD,CAFJ;AAGD,KAJD;AAKD;;AAEDzB,EAAAA,IAAI,GAAG4B,KAAP,CAAaF,OAAO,CAACF,KAArB;AACD","sourcesContent":["const nodemailer = require(\"nodemailer\");\n\nexport default function handler(req, res) {\n  res.status(200).json({ status: 200 });\n\n  async function main() {\n    let transporter = nodemailer.createTransport({\n      host: \"mail.gandi.net\",\n      port: \"465\",\n      secure: \"true\",\n      auth: {\n        user: process.env.EMAIL,\n        pass: process.env.EMAIL_PASS,\n      },\n    });\n\n    let info = await transporter.sendMail({\n      from: '\"Graham Web Works\" <donotreply@grahamwebdesign.com>',\n      to: \"luke.evan.graham@gmail.com\",\n      subject: \"Message from grahamwebworks.com\",\n      text: `${req.body.name} (${req.body.email}) just sent this message via www.grahamwebworks.com:\n        \n        ${req.body.message}`,\n    });\n\n    transporter.verify(function (error, success) {\n      error\n        ? console.log(error)\n        : console.log(\"Server is ready to take our messages\", success);\n    });\n  }\n\n  main().catch(console.error);\n}\n"]},"metadata":{},"sourceType":"module"}